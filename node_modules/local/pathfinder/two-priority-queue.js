'use strict';

module.exports = TwoPriorityQueue;

var Queue = require('./queue.js');

/**
 * Wraps two Queue objects into one, with a function to determine which queue added elements go to.
 * deq() takes from the high priority queue first, then the low priority queue.
 *
 * lowPriorityFunc: function(queueItem) { return true/false;} // true if low priority element.
 */
function TwoPriorityQueue(lowPriorityFunc) {    
    this.lowPriorityFunc = lowPriorityFunc;

    this.hiQueue = new Queue();
    this.loQueue = new Queue();
}

TwoPriorityQueue.prototype.enq = function(item) {
    if (this.lowPriorityFunc(item))
        this.loQueue.enq(item);
    else
        this.hiQueue.enq(item);
};
TwoPriorityQueue.prototype.deq = function () {

    if (!this.hiQueue.isEmpty())
        return this.hiQueue.deq();
    else
        return this.loQueue.deq();
}
TwoPriorityQueue.prototype.isEmpty = function () {
    return this.hiQueue.isEmpty() && this.loQueue.isEmpty();

}