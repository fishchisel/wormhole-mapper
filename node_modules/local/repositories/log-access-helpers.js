'use strict';

var userRep = require('local/repositories/user');

var me = {
    getCreatorId: function () {
        var log = this.log;

        for (var key in log) {
            var record = log[key];
            if (record.type === 'c') return record.user;
        }
        return null;
    },
    getLastEditorId: function () {
        var log = this.log;
        var keys = Object.keys(log);

        if (log.length == 0)
            return null;

        keys = keys.sort();
        var record = log[keys[keys.length - 1]];
        if (record)
            return record.user;
        return null;

        return record.user;
    },
    getCreator: function () {
        return userRep.get(this.getCreatorId());
    },
    getLastEditor: function () {
        return userRep.get(this.getLastEditorId());
    }
};

module.exports = me;